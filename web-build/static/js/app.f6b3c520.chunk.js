(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{241:function(e,t,a){"use strict";a.d(t,"a",(function(){return se}));var n=a(240),r=a(0),s=a.n(r),c=a(356),o=a(361),i=a(357),l=a(83),j=a(242),d=a(1),u=a.n(d),b=a(2),h=a.n(b),O=a(9),x=a.n(O),p=a(164),f=a(359),m=a(345),g=a(346),v=a(347),S=a(18),w=a(367),y=a(348),P=a(349),I=a(52),_=a(332),z=a(227),R=a(350),D=a(363),A=a(364),T=a(362),C=a(99),E=a(351),k=a(85),B=a.n(k),L=a(8),F=a(7);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=e.navigation,a=s.a.useState({}),n=h()(a,2),c=n[0],o=n[1];var i=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=JSON.stringify(e),a.next=4,x.a.awrap(C.a.setItem("@data_user",t));case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("erro ao efetuar o estado "+a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]],Promise)};return Object(r.useEffect)((function(){"web"==L.a.OS?o(Q(Q({},c),{},{stateQRButton:!0})):o(Q(Q({},c),{},{stateQRButton:!1}))}),[]),Object(F.jsx)(f.a,{children:Object(F.jsx)(m.a,{w:"100%",h:"100%",bg:"#fff",children:Object(F.jsx)(g.a,{bg:"#fff",children:Object(F.jsx)(v.a,{children:Object(F.jsx)(S.a,{w:"90%",maxW:390,h:"91%",maxH:900,bg:"light.100",borderRadius:10,top:5,children:Object(F.jsxs)(w.a,{h:{base:"100%",lg:"auto"},maxH:{base:"450px",lg:"auto"},behavior:"ios"===L.a.OS||"android"===L.a.OS?"padding":"height",children:[Object(F.jsx)(v.a,{children:Object(F.jsx)(y.a,{top:5,source:{uri:"https://pbs.twimg.com/profile_images/438771627854024704/Az4OY07a_400x400.png"},alt:"Alternate Text",size:"sm"})}),Object(F.jsxs)(v.a,{top:5,children:[Object(F.jsx)(P.a,{size:"sm",children:"INSTITUTO"}),Object(F.jsx)(P.a,{size:"sm",children:"FEDERAL"}),Object(F.jsx)(I.a,{fontSize:"xl",children:"Piau\xed"})]}),Object(F.jsx)(v.a,{w:"100%",children:Object(F.jsxs)(S.a,{safeArea:!0,p:"2",py:"8",w:"90%",maxW:"290",children:[Object(F.jsx)(P.a,{size:"lg",fontWeight:"600",color:"coolGray.800",_dark:{color:"warmGray.50"},children:"Bem vindo de volta"}),Object(F.jsx)(P.a,{mt:"1",_dark:{color:"warmGray.200"},color:"coolGray.600",fontWeight:"medium",size:"xs",children:"fa\xe7a login para continuar!"}),Object(F.jsxs)(p.a,{space:3,mt:"5",_android:{top:-10},_ios:{top:-15},children:[Object(F.jsxs)(_.a,{isInvalid:c.IDState,children:[Object(F.jsx)(_.a.Label,{children:Object(F.jsxs)(z.a,{space:2,children:[Object(F.jsx)(_.a.Label,{children:"ID"}),Object(F.jsx)(_.a.ErrorMessage,{top:-2.5,leftIcon:Object(F.jsx)(R.a,{size:"xs"}),children:"Usu\xe1rio n\xe3o encontrado"})]})}),Object(F.jsx)(D.a,{onChangeText:function(e){return o(Q(Q({},c),{},{id_code:e}))}})]}),Object(F.jsxs)(_.a,{isInvalid:c.PasswordState,children:[Object(F.jsx)(_.a.Label,{children:Object(F.jsxs)(z.a,{space:2,children:[Object(F.jsx)(_.a.Label,{children:"Senha"}),Object(F.jsx)(_.a.ErrorMessage,{top:-2.5,leftIcon:Object(F.jsx)(R.a,{size:"xs"}),children:"Senha incorreta"})]})}),Object(F.jsx)(D.a,{type:"password",onChangeText:function(e){return o(Q(Q({},c),{},{password:e}))}}),Object(F.jsx)(A.a,{_text:{fontSize:"xs",fontWeight:"500",color:"success.500"},alignSelf:"flex-end",mt:"1",children:"Esqueceu a senha?"})]}),Object(F.jsx)(T.a,{mt:"2",colorScheme:"success",onPress:function(){B.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/user/login/",{params:{method:"normal",id_code:c.id_code,password:c.password}}).then((function(e){var a=e.data;i(e.data),void 0!=a.warning_error&"user does not exist"==a.warning_error&&o(Q(Q({},c),{},{IDState:!0,PasswordState:!1})),void 0!=a.warning_error&"incorrect password"==a.warning_error&&o(Q(Q({},c),{},{PasswordState:!0,IDState:!1})),void 0!==e.data.token_session&&(o(Q(Q({},c),{},{PasswordState:!1,IDState:!1})),t.navigate("Dashboard"))}))},children:"Entrar"}),Object(F.jsxs)(z.a,{mt:"6",justifyContent:"center",children:[Object(F.jsxs)(I.a,{fontSize:"sm",color:"coolGray.600",_dark:{color:"warmGray.200"},children:["Veja o projeto no"," "]}),Object(F.jsx)(A.a,{_text:{color:"success.500",fontWeight:"medium",fontSize:"sm"},href:"https://github.com/BirdRa1n/SISTEMA-DE-PORTARIA-IFPI",children:"GitHub"})]}),Object(F.jsx)(v.a,{children:Object(F.jsx)(T.a,{isDisabled:c.stateQRButton,colorScheme:"success",onPress:function(){return t.navigate("LoginQR")},leftIcon:Object(F.jsx)(E.a,{name:"qrcode-scan",size:24,color:"black"}),children:"Entre com QRCode"})})]})]})})]})})})})})})}var W=a(358),G=a(352),H=a(231);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){e.navigation;var t=s.a.useState({}),a=h()(t,2),n=a[0],c=a[1],o=s.a.useState({}),i=h()(o,2),l=i[0],j=i[1],d=Object(r.useState)(!1),u=h()(d,2),b=u[0],O=u[1];return Object(r.useEffect)((function(){B.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/keys/list",{params:{filter:"all"}}).then((function(e){console.log(e),c(J(J({},n),{},{HallList:e.data}))})),function(){var e;x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.awrap(C.a.getItem("@data_user"));case 3:e=t.sent,j(JSON.parse(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]],Promise)}()}),[]),Object(F.jsxs)(f.a,{children:[Object(F.jsx)(v.a,{children:Object(F.jsx)(W.a,{isOpen:b,onClose:function(){return O(!1)},children:Object(F.jsxs)(W.a.Content,{w:"100%",maxWidth:"340px",children:[Object(F.jsxs)(W.a.Body,{children:[Object(F.jsxs)(P.a,{fontSize:17,marginBottom:1,children:["Deseja solicitar a chave da sala ",n.ModalHall,"?"]}),Object(F.jsx)(I.a,{fontSize:"md",children:n.ModalDescription})]}),Object(F.jsx)(W.a.Footer,{children:Object(F.jsxs)(T.a.Group,{space:2,children:[Object(F.jsx)(T.a,{variant:"ghost",colorScheme:"blueGray",onPress:function(){O(!1)},children:"N\xe3o"}),Object(F.jsx)(T.a,{colorScheme:"success",onPress:function(){var e,t;e=l.signature_digital,t=n.ModalHall,B.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/keys/request",{params:{signature_digital:e,hall:t}}).then((function(e){O(!1),console.log(e.data);var t=e.data;void 0!=t.warning_error&&alert("Voc\xea n\xe3o possui autoriza\xe7\xe3o para solicitar essa chave"),void 0!=t.code_request&"successfully reserved key"==t.success&&alert("Solicita\xe7\xe3o realizada com sucesso! \n\nC\xf3digo da solicita\xe7\xe3o: "+t.code_request),"room is busy"==t.warning_error&&alert("A sala j\xe1 est\xe1 sendo usada")}))},children:"Sim"})]})})]})})}),Object(F.jsxs)(S.a,{w:"100%",bg:"#FBFBFB",maxW:500,h:"100%",children:[Object(F.jsx)(S.a,{p:2,safeArea:!0,children:Object(F.jsxs)(z.a,{children:[Object(F.jsx)(y.a,{source:{uri:"https://pbs.twimg.com/profile_images/438771627854024704/Az4OY07a_400x400.png"},alt:"Alternate Text",size:"sm"}),Object(F.jsxs)(m.a,{marginLeft:"2%",children:[Object(F.jsx)(P.a,{size:"sm",children:l.name}),Object(F.jsx)(I.a,{fontSize:10,children:l.description}),Object(F.jsx)(I.a,{fontSize:10,top:2,children:"INSTITUTO FEDERAL CAMPUS PEDRO II"})]})]})}),Object(F.jsx)(v.a,{top:5,children:Object(F.jsx)(G.a,{w:"95%",maxW:350,h:"80%",numColumns:3,columnWrapperStyle:{flex:1,justifyContent:"space-around",marginLeft:5,marginBottom:5},showsVerticalScrollIndicator:!1,data:n.HallList,renderItem:function(e){var t=e.item;return Object(F.jsx)(H.a,{onPress:function(){return e=t.hall,a=t.description,r=t.status,s=t.conveyer,O(!0),void c(J(J({},n),{},{ModalHall:e,ModalDescription:a,ModalStatus:r,ModalCoveyer:s}));var e,a,r,s},children:Object(F.jsx)(S.a,{marginBottom:1,marginTop:1,alignItems:"center",bg:"light.50",borderRadius:2,w:109,h:59,p:0,shadow:1,children:Object(F.jsx)(z.a,{children:Object(F.jsxs)(p.a,{children:[Object(F.jsx)(P.a,{size:"sm",children:"Sala"}),Object(F.jsx)(P.a,{children:t.hall})]})})})})},keyExtractor:function(e){return e.id}})})]})]})}function V(){return Object(F.jsx)(f.a,{children:Object(F.jsx)(m.a,{w:"100%",h:"100%",children:Object(F.jsxs)(v.a,{w:"100%",h:"100%",children:[Object(F.jsx)(P.a,{size:"sm",children:"Em desenvolvimento"}),Object(F.jsx)(I.a,{children:"Tela: Requests"})]})})})}function Y(){return Object(F.jsx)(f.a,{children:Object(F.jsx)(m.a,{w:"100%",h:"100%",children:Object(F.jsxs)(v.a,{w:"100%",h:"100%",children:[Object(F.jsx)(P.a,{size:"sm",children:"Em desenvolvimento"}),Object(F.jsx)(I.a,{children:"Tela: Account"})]})})})}var K=a(6),X=a(4),Z=a(169);function $(e){var t=e.navigation,a=s.a.useState({}),n=h()(a,2),c=(n[0],n[1],Object(r.useState)(null)),o=h()(c,2),i=(o[0],o[1]),l=Object(r.useState)(!1),j=h()(l,2),d=j[0],u=j[1];Object(r.useEffect)((function(){!function(){var e,t;x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(Z.a.requestPermissionsAsync());case 2:e=a.sent,t=e.status,i("granted"===t);case 5:case"end":return a.stop()}}),null,null,null,Promise)}()}),[]);return Object(F.jsx)(K.a,{style:ee.container,children:Object(F.jsx)(K.a,{style:ee.box,children:Object(F.jsx)(Z.a,{onBarCodeScanned:d?void 0:function(e){e.type;var a=e.data;u(!0);var n,r=JSON.parse(a);void 0!==r.QRtoken?(n=r.QRtoken,B.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/user/login/",{params:{method:"QRCode",QRData:n}}).then((function(e){!function(e){var t;x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=JSON.stringify(e),a.next=4,x.a.awrap(C.a.setItem("@data_user",t));case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("erro ao efetuar o estado "+a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]],Promise)}(e.data),void 0!==e.data.token_session&&t.navigate("Dashboard")}))):alert("QRCode inv\xe1lido")},style:X.a.absoluteFillObject})})})}var ee=X.a.create({container:{flex:1,flexDirection:"column",justifyContent:"center",alignContent:"center",alignItems:"center"},box:{width:"100%",height:"100%"}}),te=Object(o.a)(),ae=Object(i.a)(),ne=n.a("/");function re(){return Object(F.jsxs)(ae.Navigator,{screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var a,n=e.focused,r=e.color,s=e.size;return"Chaves"===t.name?a=n?"ios-home-outline":"ios-home-sharp":"Solicita\xe7\xf5es"===t.name?a="reorder-three-sharp":"Conta"===t.name&&(a=n?"person-circle-outline":"person-circle"),Object(F.jsx)(j.a,{name:a,size:s,color:r})},tabBarActiveTintColor:"green",tabBarInactiveTintColor:"black"}},children:[Object(F.jsx)(ae.Screen,{name:"Chaves",component:U,options:{headerShown:!1,headerTitle:"Portaria"}}),Object(F.jsx)(ae.Screen,{name:"Solicita\xe7\xf5es",component:V,options:{headerShown:!1,headerTitle:"Solicita\xe7\xf5es"}}),Object(F.jsx)(ae.Screen,{name:"Conta",component:Y,options:{headerShown:!1,headerTitle:"Conta"}})]})}function se(){var e={prefixes:[ne]};return Object(F.jsx)(l.a,{children:Object(F.jsx)(c.a,{linking:e,children:Object(F.jsxs)(te.Navigator,{screenOptions:{headerShown:!1},initialRouteName:"Login",children:[Object(F.jsx)(te.Screen,{name:"Login",component:N}),Object(F.jsx)(te.Screen,{name:"Dashboard",component:re}),Object(F.jsx)(te.Screen,{name:"LoginQR",component:$})]})})})}},253:function(e,t,a){e.exports=a(331)},272:function(e,t){}},[[253,1,2]]]);
//# sourceMappingURL=app.f6b3c520.chunk.js.map