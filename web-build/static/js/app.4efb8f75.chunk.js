(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{264:function(e,t,r){"use strict";r.d(t,"a",(function(){return ie}));var a=r(0),n=r.n(a),s=r(394),c=r(396),o=r(395),i=r(95),l=r(266),j=r(1),d=r.n(j),u=r(2),b=r.n(u),h=r(9),O=r.n(h),p=r(189),x=r(398),f=r(17),m=r(381),g=r(382),v=r(383),S=r(384),w=r(385),y=r(54),_=r(368),P=r(248),I=r(386),z=r(402),D=r(403),R=r(399),A=r(86),C=r(387),E=r(68),k=r.n(E),T=r(8),q=r(3);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=e.navigation,r=n.a.useState({}),s=b()(r,2),c=s[0],o=s[1];var i=function(e){var t;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=JSON.stringify(e),r.next=4,O.a.awrap(A.a.setItem("@data_user",t));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),console.log("erro ao efetuar o estado "+r.t0);case 9:case"end":return r.stop()}}),null,null,[[0,6]],Promise)};return Object(a.useEffect)((function(){"web"==T.a.OS?(console.log("Plataform is Web"),o(L(L({},c),{},{stateQRButton:!0}))):(console.log("Plataform is !web"),o(L(L({},c),{},{stateQRButton:!1})))}),[]),Object(q.jsx)(x.a,{children:Object(q.jsx)(f.a,{w:"100%",h:"100%",bg:"#fff",safeArea:!0,children:Object(q.jsx)(m.a,{bg:"#fff",showsVerticalScrollIndicator:!1,children:Object(q.jsx)(g.a,{children:Object(q.jsx)(f.a,{w:"90%",maxW:390,h:"91%",maxH:900,bg:"light.100",borderRadius:10,top:5,children:Object(q.jsxs)(v.a,{h:{base:"100%",lg:"auto"},maxH:{base:"450px",lg:"auto"},behavior:"ios"===T.a.OS||"android"===T.a.OS?"padding":"height",children:[Object(q.jsx)(g.a,{children:Object(q.jsx)(S.a,{top:5,source:{uri:"https://pbs.twimg.com/profile_images/438771627854024704/Az4OY07a_400x400.png"},alt:"Alternate Text",size:"sm"})}),Object(q.jsxs)(g.a,{top:5,children:[Object(q.jsx)(w.a,{size:"sm",children:"INSTITUTO"}),Object(q.jsx)(w.a,{size:"sm",children:"FEDERAL"}),Object(q.jsx)(y.a,{fontSize:"xl",children:"Piau\xed"})]}),Object(q.jsx)(g.a,{w:"100%",children:Object(q.jsxs)(f.a,{safeArea:!0,p:"2",py:"8",w:"90%",maxW:"290",children:[Object(q.jsx)(w.a,{size:"lg",fontWeight:"600",color:"coolGray.800",_dark:{color:"warmGray.50"},children:"Bem vindo de volta"}),Object(q.jsx)(w.a,{mt:"1",_dark:{color:"warmGray.200"},color:"coolGray.600",fontWeight:"medium",size:"xs",children:"fa\xe7a login para continuar!"}),Object(q.jsxs)(p.a,{space:3,mt:"5",_android:{top:-10},_ios:{top:-15},children:[Object(q.jsxs)(_.a,{isInvalid:c.IDState,children:[Object(q.jsx)(_.a.Label,{children:Object(q.jsxs)(P.a,{space:2,children:[Object(q.jsx)(_.a.Label,{children:"ID"}),Object(q.jsx)(_.a.ErrorMessage,{top:-2.5,leftIcon:Object(q.jsx)(I.a,{size:"xs"}),children:"Usu\xe1rio n\xe3o encontrado"})]})}),Object(q.jsx)(z.a,{onChangeText:function(e){return o(L(L({},c),{},{id_code:e}))}})]}),Object(q.jsxs)(_.a,{isInvalid:c.PasswordState,children:[Object(q.jsx)(_.a.Label,{children:Object(q.jsxs)(P.a,{space:2,children:[Object(q.jsx)(_.a.Label,{children:"Senha"}),Object(q.jsx)(_.a.ErrorMessage,{top:-2.5,leftIcon:Object(q.jsx)(I.a,{size:"xs"}),children:"Senha incorreta"})]})}),Object(q.jsx)(z.a,{type:"password",onChangeText:function(e){return o(L(L({},c),{},{password:e}))}}),Object(q.jsx)(D.a,{_text:{fontSize:"xs",fontWeight:"500",color:"success.500"},alignSelf:"flex-end",mt:"1",href:"https://wa.me/5586981736756?text=Ol%C3%A1%21+esqueci+a+minha+senha+do+App+Portaria.+Desejo+redefini-la.+Meu+ID+%C3%A9+"+c.id_code,children:"Esqueceu a senha?"})]}),Object(q.jsx)(R.a,{mt:"2",colorScheme:"success",onPress:function(){k.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/user/login/",{params:{method:"normal",id_code:c.id_code,password:c.password}}).then((function(e){var r=e.data;i(e.data),void 0!=r.warning_error&"user does not exist"==r.warning_error&&o(L(L({},c),{},{IDState:!0,PasswordState:!1})),void 0!=r.warning_error&"incorrect password"==r.warning_error&&o(L(L({},c),{},{PasswordState:!0,IDState:!1})),void 0!==e.data.token_session&&(o(L(L({},c),{},{PasswordState:!1,IDState:!1})),t.navigate("Dashboard"),console.log("Login realizado com sucesso!"))}))},children:"Entrar"}),Object(q.jsxs)(P.a,{mt:"6",justifyContent:"center",children:[Object(q.jsxs)(y.a,{fontSize:"sm",color:"coolGray.600",_dark:{color:"warmGray.200"},children:["Veja o projeto no"," "]}),Object(q.jsx)(D.a,{_text:{color:"success.500",fontWeight:"medium",fontSize:"sm"},href:"https://github.com/BirdRa1n/SISTEMA-DE-PORTARIA-IFPI",children:"GitHub"})]}),Object(q.jsx)(g.a,{children:Object(q.jsx)(R.a,{isDisabled:c.stateQRButton,colorScheme:"success",onPress:function(){return t.navigate("LoginQR")},leftIcon:Object(q.jsx)(C.a,{name:"qrcode-scan",size:24,color:"black"}),children:"Entre com QRCode"})})]})]})})]})})})})})})}var M=r(170),N=r(388),W=r(389),Q=r(78);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e){e.navigation;var t=n.a.useState({}),r=b()(t,2),s=r[0],c=r[1],o=n.a.useState({}),i=b()(o,2),l=i[0],j=i[1],d=Object(a.useState)(!1),u=b()(d,2),h=u[0],m=u[1];return Object(a.useEffect)((function(){k.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/keys/list",{params:{filter:"all"}}).then((function(e){console.log(e),c(H(H({},s),{},{HallList:e.data}))})),function(){var e;O.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.awrap(A.a.getItem("@data_user"));case 3:e=t.sent,j(JSON.parse(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]],Promise)}()}),[]),Object(q.jsxs)(x.a,{children:[Object(q.jsx)(g.a,{children:Object(q.jsx)(M.a,{isOpen:h,onClose:function(){return m(!1)},children:Object(q.jsxs)(M.a.Content,{w:"100%",maxWidth:"340px",children:[Object(q.jsxs)(M.a.Body,{children:[Object(q.jsxs)(w.a,{fontSize:17,marginBottom:1,children:["Deseja solicitar a chave da sala ",s.ModalHall,"?"]}),Object(q.jsx)(y.a,{fontSize:"md",children:s.ModalDescription})]}),Object(q.jsx)(M.a.Footer,{children:Object(q.jsxs)(R.a.Group,{space:2,children:[Object(q.jsx)(R.a,{variant:"ghost",colorScheme:"blueGray",onPress:function(){m(!1)},children:"N\xe3o"}),Object(q.jsx)(R.a,{colorScheme:"success",onPress:function(){var e,t;e=l.signature_digital,t=s.ModalHall,k.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/keys/request",{params:{signature_digital:e,hall:t}}).then((function(e){m(!1),console.log(e.data);var t=e.data;void 0!=t.warning_error&&alert("Voc\xea n\xe3o possui autoriza\xe7\xe3o para solicitar essa chave"),void 0!=t.code_request&"successfully reserved key"==t.success&&alert("Solicita\xe7\xe3o realizada com sucesso! \n\nC\xf3digo da solicita\xe7\xe3o: "+t.code_request),"room is busy"==t.warning_error&&alert("A sala j\xe1 est\xe1 sendo usada")}))},children:"Sim"})]})})]})})}),Object(q.jsxs)(f.a,{w:"100%",bg:"#FBFBFB",maxW:500,h:"100%",children:[Object(q.jsx)(f.a,{p:2,safeArea:!0,children:Object(q.jsxs)(P.a,{children:[Object(q.jsx)(S.a,{source:{uri:"https://pbs.twimg.com/profile_images/438771627854024704/Az4OY07a_400x400.png"},alt:"Alternate Text",size:"sm"}),Object(q.jsxs)(N.a,{marginLeft:"2%",children:[Object(q.jsx)(w.a,{size:"sm",children:l.name}),Object(q.jsx)(y.a,{fontSize:10,children:l.description}),Object(q.jsx)(y.a,{fontSize:10,top:2,children:"INSTITUTO FEDERAL CAMPUS PEDRO II"})]})]})}),Object(q.jsx)(g.a,{top:5,children:Object(q.jsx)(W.a,{w:"95%",maxW:350,h:"80%",numColumns:3,columnWrapperStyle:{flex:1,justifyContent:"space-around",marginLeft:5,marginBottom:5},showsVerticalScrollIndicator:!1,data:s.HallList,renderItem:function(e){var t=e.item;return Object(q.jsx)(Q.a,{onPress:function(){return e=t.hall,r=t.description,a=t.status,n=t.conveyer,m(!0),void c(H(H({},s),{},{ModalHall:e,ModalDescription:r,ModalStatus:a,ModalCoveyer:n}));var e,r,a,n},children:Object(q.jsx)(f.a,{marginBottom:1,marginTop:1,alignItems:"center",bg:"light.50",borderRadius:2,w:109,h:59,p:0,shadow:1,children:Object(q.jsx)(P.a,{children:Object(q.jsxs)(p.a,{children:[Object(q.jsx)(w.a,{size:"sm",children:"Sala"}),Object(q.jsx)(w.a,{children:t.hall})]})})})})},keyExtractor:function(e){return e.id}})})]})]})}var V=r(390),U=r(397),Y=r(265);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(){var e=n.a.useState({}),t=b()(e,2),r=t[0],s=t[1],c=n.a.useState({}),o=b()(c,2),i=o[0],l=o[1],j=Object(V.a)(),d=j.isOpen,u=j.onOpen,h=j.onClose,O=Object(a.useState)(!1),m=b()(O,2),v=m[0],S=m[1];function _(){k.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/keys/requestslist/",{params:{filter:"user",id_code:"20191p2ti0169"}}).then((function(e){var t=e.data;s(X(X({},r),{},{Data:t}))}))}return Object(a.useEffect)((function(){_()}),[]),Object(q.jsx)(x.a,{children:Object(q.jsxs)(N.a,{w:"100%",h:"100%",children:[Object(q.jsx)(g.a,{w:"100%",h:"100%",children:Object(q.jsx)(W.a,{onRefresh:function(){S(!0),_(),S(!1)},refreshing:v,top:2,w:"95%",maxW:350,h:"80%",showsVerticalScrollIndicator:!1,data:r.Data,renderItem:function(e){var t=e.item;return Object(q.jsx)(g.a,{children:Object(q.jsx)(Q.a,{style:{width:"100%"},onPress:function(){return e=t.code_request,r=t.hall,a=t.id_code_conveyer,n=t.id_request,s=t.last,c=t.name_conveyer,o=t.photo_conveyer,j=t.request_datatime,void("null"==t.request_delivery&&(u(!u),l(X(X({},i),{},{request_delivery:"Em uso",hall:r,code_request:e,id_code_conveyer:a,id_request:n,last:s,name_conveyer:c,photo_conveyer:o,request_datatime:j}))));var e,r,a,n,s,c,o,j},children:Object(q.jsx)(f.a,{marginBottom:1,marginTop:1,bg:"light.50",borderRadius:2,w:"100%",maxW:400,h:59,p:0,shadow:1,children:Object(q.jsxs)(w.a,{p:1,size:"sm",children:["Solicita\xe7\xe3o: ",Object(q.jsx)(y.a,{children:t.request_datatime})]})})})})},keyExtractor:function(e){return e.id}})}),Object(q.jsx)(U.a,{isOpen:d,onClose:h,children:Object(q.jsxs)(U.a.Content,{children:[Object(q.jsx)(Y.a,{value:JSON.stringify(i),size:150,logo:{uri:"https://pbs.twimg.com/profile_images/438771627854024704/Az4OY07a_400x400.png"},logoSize:30,logoBackgroundColor:"transparent"}),Object(q.jsx)(y.a,{top:1,children:i.code_request}),Object(q.jsxs)(p.a,{w:"100%",marginBottom:20,children:[Object(q.jsxs)(P.a,{top:3,children:[Object(q.jsx)(w.a,{size:"sm",children:"Nome: "}),Object(q.jsx)(y.a,{fontSize:"sm",children:i.name_conveyer})]}),Object(q.jsxs)(P.a,{top:3,children:[Object(q.jsx)(w.a,{size:"sm",children:"Data da solicita\xe7\xe3o: "}),Object(q.jsx)(y.a,{fontSize:"sm",children:i.request_datatime})]}),Object(q.jsxs)(P.a,{top:3,children:[Object(q.jsx)(w.a,{size:"sm",children:"Sala: "}),Object(q.jsx)(y.a,{fontSize:"sm",children:i.hall})]}),Object(q.jsxs)(P.a,{top:3,children:[Object(q.jsx)(w.a,{size:"sm",children:"Estado: "}),Object(q.jsx)(y.a,{bg:"green.400",fontSize:"sm",children:i.request_delivery})]})]})]})})]})})}function $(){var e=n.a.useState({}),t=b()(e,2),r=t[0],s=t[1];console.log(r);return Object(a.useEffect)((function(){!function(){var e;O.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.awrap(A.a.getItem("@data_user"));case 3:e=t.sent,s(JSON.parse(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]],Promise)}()}),[]),Object(q.jsx)(x.a,{children:Object(q.jsx)(f.a,{w:"100%",h:"100%",safeArea:!0,bg:"#fff",children:Object(q.jsx)(f.a,{w:"100%",children:Object(q.jsxs)(g.a,{children:[Object(q.jsx)(S.a,{resizeMode:"contain",borderRadius:100,source:{uri:r.photo},alt:"Alternate Text",size:"xl"}),Object(q.jsx)(P.a,{top:2,children:Object(q.jsx)(y.a,{fontSize:"sm",children:r.name})}),Object(q.jsx)(p.a,{w:"90%",h:"70%",bg:"light.100",top:4,borderRadius:5,shadow:1,children:Object(q.jsx)(N.a,{p:2})})]})})})})}var ee=r(6),te=r(5),re=r(194);function ae(e){var t=e.navigation,r=n.a.useState({}),s=b()(r,2),c=(s[0],s[1],Object(a.useState)(null)),o=b()(c,2),i=(o[0],o[1]),l=Object(a.useState)(!1),j=b()(l,2),d=j[0],u=j[1];Object(a.useEffect)((function(){!function(){var e,t;O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.a.awrap(re.a.requestPermissionsAsync());case 2:e=r.sent,t=e.status,i("granted"===t);case 5:case"end":return r.stop()}}),null,null,null,Promise)}()}),[]);return Object(q.jsx)(ee.a,{style:ne.container,children:Object(q.jsx)(ee.a,{style:ne.box,children:Object(q.jsx)(re.a,{onBarCodeScanned:d?void 0:function(e){e.type;var r=e.data;u(!0);var a,n=JSON.parse(r);void 0!==n.QRtoken?(a=n.QRtoken,k.a.get("https://birdra1n.x10.bz/IFPI_PORTARIA/api/user/login/",{params:{method:"QRCode",QRData:a}}).then((function(e){!function(e){var t;O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=JSON.stringify(e),r.next=4,O.a.awrap(A.a.setItem("@data_user",t));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),console.log("erro ao efetuar o estado "+r.t0);case 9:case"end":return r.stop()}}),null,null,[[0,6]],Promise)}(e.data),void 0!==e.data.token_session&&t.navigate("Dashboard")}))):alert("QRCode inv\xe1lido")},style:te.a.absoluteFillObject})})})}var ne=te.a.create({container:{flex:1,flexDirection:"column",justifyContent:"center",alignContent:"center",alignItems:"center"},box:{width:"100%",height:"100%"}}),se=Object(c.a)(),ce=Object(o.a)();function oe(){return Object(q.jsxs)(ce.Navigator,{screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var r,a=e.focused,n=e.color,s=e.size;return"Chaves"===t.name?r=a?"ios-home-outline":"ios-home-sharp":"Solicita\xe7\xf5es"===t.name?r="reorder-three-sharp":"Conta"===t.name&&(r=a?"person-circle-outline":"person-circle"),Object(q.jsx)(l.a,{name:r,size:s,color:n})},tabBarActiveTintColor:"green",tabBarInactiveTintColor:"black"}},children:[Object(q.jsx)(ce.Screen,{name:"Chaves",component:J,options:{headerShown:!1,headerTitle:"Portaria"}}),Object(q.jsx)(ce.Screen,{name:"Solicita\xe7\xf5es",component:Z,options:{headerShown:!0,headerTitle:"Solicita\xe7\xf5es"}}),Object(q.jsx)(ce.Screen,{name:"Conta",component:$,options:{headerShown:!1,headerTitle:"Conta"}})]})}function ie(){return Object(q.jsx)(i.a,{children:Object(q.jsx)(s.a,{children:Object(q.jsxs)(se.Navigator,{screenOptions:{headerShown:!1},initialRouteName:"Login",children:[Object(q.jsx)(se.Screen,{name:"Login",component:F}),Object(q.jsx)(se.Screen,{name:"Dashboard",component:oe}),Object(q.jsx)(se.Screen,{name:"LoginQR",component:ae})]})})})}},277:function(e,t,r){e.exports=r(367)}},[[277,1,2]]]);
//# sourceMappingURL=app.4efb8f75.chunk.js.map